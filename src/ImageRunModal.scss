@import "global-variables";

// Ensure the width fits within the screen boundaries (with padding on the sides)
.pf-v5-c-select__menu {
    // 3xl is the left+right padding for an iPhone SE;
    // this works on other screen sizes as well
    max-inline-size: calc(100vw - var(--pf-v5-global--spacer--3xl));
}

// Make sure the footer is visible with more then 5 results.
.pf-c-select__menu-list {
    // 35% viewport height is for 1280x720;
    // since it picks the min of the two, it works everywhere
    max-block-size: min(20rem, 35vh);
    overflow: hidden scroll;
}

// Fix the dot next to spinner: https://github.com/patternfly/patternfly-react/issues/6383
.pf-v5-c-select__list-item.pf-m-loading {
    list-style-type: none;
}

.image-search-footer {
    flex-wrap: wrap;

    .pf-v5-c-toggle-group__text {
        word-wrap: break-word;
    }
}

 // PF4 does not yet support multiple form fields for the same label
.ct-input-group-spacer-sm.pf-v5-l-flex {
    // Limit width for select entries and inputs in the input groups otherwise they take up the whole space
    > .pf-v5-c-select, .pf-v5-c-form-control:not(.pf-v5-c-select__toggle-typeahead) {
      max-inline-size: 8ch;
    }
}

/* Ensure the internal grid leaves room for the delete button column */
.vncp-proxy-form .ct-list-row {
  display: grid;
  grid-template-columns: minmax(220px, 1fr) 140px min-content; /* last col for actions */
  align-items: start;
  column-gap: var(--pf-v5-global--spacer--md);
}

/* Make sure the action cell is placed in the last column and visible */
.vncp-proxy-form .ct-list-actions {
  justify-self: end;
  align-self: center;
}

/* The PF textarea lives inside the editor; target the real <textarea> */
.vncp-code-editor textarea.pf-v5-c-form-control.vncp-code-input {
  position: relative;
  background: transparent !important;
  border-color: transparent !important;

  /* Hide glyphs everywhere */
  color: transparent !important;
  -webkit-text-fill-color: transparent !important; /* Safari/Chrome */
  text-shadow: none !important;

  /* Keep the caret visible */
  caret-color: var(--pf-v5-global--Color--100) !important;

  /* Remove extra visuals that can “paint” text */
  box-shadow: none !important;
  outline: 0 !important;

  /* Prevent layout surprises; preview handles scroll */
  resize: none !important;
}

/* Hide placeholder and selected text (selection can re-paint) */
.vncp-code-editor textarea.pf-v5-c-form-control.vncp-code-input::placeholder {
  color: transparent !important;
  -webkit-text-fill-color: transparent !important;
}
.vncp-code-editor textarea.pf-v5-c-form-control.vncp-code-input::selection {
  background: transparent !important;
  color: transparent !important;
}

/* Autofill can force a text color on WebKit */
.vncp-code-editor textarea.pf-v5-c-form-control.vncp-code-input:-webkit-autofill {
  -webkit-text-fill-color: transparent !important;
  transition: background-color 9999s ease-out !important; /* hide yellow */
}

/* Windows High Contrast / forced-colors: tell UA not to remap colors */
@media (forced-colors: active) {
  .vncp-code-editor .vncp-code-preview {
    forced-color-adjust: none;
  }
  .vncp-code-editor textarea.pf-v5-c-form-control.vncp-code-input {
    forced-color-adjust: none;
    color: transparent !important;
    caret-color: CanvasText !important; /* keep caret visible */
  }
}





// HACK: A local copy of pf-m-horizontal (as ct-m-horizontal),
// but applied at the FormGroup level instead of Form
@media (min-width: $pf-v5-global--breakpoint--md) {
    .pf-v5-c-form__group.ct-m-horizontal {
        display: grid;
        grid-column-gap: var(--pf-v5-c-form--m-horizontal__group-label--md--GridColumnGap);
        grid-template-columns: var(--pf-v5-c-form--m-horizontal__group-label--md--GridColumnWidth) var(--pf-v5-c-form--m-horizontal__group-control--md--GridColumnWidth);
    }
}